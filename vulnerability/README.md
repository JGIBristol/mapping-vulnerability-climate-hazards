# Vulnerability data processing

This directory contains code and data for the vulnerability analysis.

Key parts:

* `data_sources.yaml` - Defines all the data sources that need to be downloaded and defines how they
  should be processed.

* `code/`

    * The initial **stages 1-5** of the analysis:

        ```
        01_download_data.py
        02_extract_and_subset_data.py
        03_join_tables.py
        04_calculate_indicators.py
        05_resample_and_join.py
        ```
        
    * Common configuration for the analysis, including data directories:

        ```
        config.py
        ```

* `notebooks/`

    * `Developing_vulnerability_indicators.ipynb` - Calculates of domain and sub-domain scores as
      well as a combined vulnerability index (**stage 6** of the analysis).

    * `Overall_risk_assessment.ipynb` - An example of an overall risk assessment, for demonstration
      purposes (**stage 7** of the analysis).

    * `Exploratory_data_analysis.ipynb` - Initial data exploration (not used in the analysis
      pipeline).

* `data/`

    * `01_raw/` - The raw data automatically downloaded from the internet (in the original file
      format).

    * `02_subset/` - The data for our area of interest (South Gloucestershire) in either csv or
      Shapefile format.

    * `03_combined/` - Data for the same geographic level combined into combined into the same file:
      2021 Census LSOA, 2021 Census MSOA and 2011 Census LSOA (the latter used in the IMD data).

    * `04_indicators/` - Metrics a.k.a. indicators variables calculated from the combined data,
      using the formulae specified in `data_sources.yaml`.

    * `05_resampled/` - Data converted to 2021 LSOA-level and combined into one file.

    * `06_index/` - Calculation of a combined vulnerability index.

    * `07_overall/` - Calculation of an overall risk assessment, for demonstration purposes.
